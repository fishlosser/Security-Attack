如何判断网站是否有 CDN？--未测试
* 传统访问：用户访问域名 --> 解析服务器 IP--> 访问目标主机
* 普通 CDN：用户访问域名 -->CDN 节点 --> 真实服务器 IP--> 访问目标主机
* 带 WAF 的 CDN：用户访问域名 -->CDN 节点（云 WAF）--> 真实服务器 IP--> 访问目标主机
很简单，使用不同地方的 ping 服务，查看对应 IP 地址是否唯一，如果不唯一则极有可能是使用了 CDN
1、通过 ping 命令，查看回显情况 2、windows 系统环境下，使用 nslookup 进行查询，看返回的域名解析的情况 3、超级 ping 工具，比如”all-tool.cn/tools   /ping“「看 ip 结果」

如何判断靶标站点是 windows/linux？
1、大小写检测：windows 大小写不敏感，而 linux 大小写敏感。
2、PING 指令：根据 TTL 值，winodws 一般情况下 > 100,linux<100 TTL (生存时间值)：该字段指定 IP 包被路由器丢弃之前允许通过的最大网段数量。

域内攻击方法有了解过吗？--未测试
MS14-068、Roasting 攻击离线爆破密码、委派攻击，非约束性委派、基于资源的约束委派、ntlm relay

拿到webshell后发现目标无法出网？
frp转发、ssh隧道、openssl反弹、netsh反弹、icmp隧道、dns隧道

dns欺骗攻击+arp欺骗
攻击者冒充域名服务器的一种欺骗行为

会话劫持--两台主机的一次性通信
（session hijack）
中间人攻击、注射式攻击
1、在正常数据传输中插入恶意数据
2、也可以对会话进行监听或接管会话

arp欺骗原理
arp -a查看arp缓存表
arp缓存不会验证是否给对方发送请求包
防御：
1、绑定网关ip与mac地址
2、apr防火墙
3、在网关绑定主机ip与mac地址


内网提权
Linux
1、使用Windows exploit suggester
2、UAC提权、令牌窃取、横向移动、纵向移动

Windows
纵向提权---由低权限提升到高权限
横向提权---获得同个角色权限

Windows提权方法
1、系统内核泄出漏洞
2、数据库提权
3、系统相关配置提权
4、注册略首选项提权
5、web中间件提权
6、dll劫持提权
7、滥用高危令牌提权
8、使用第三方软件或服务进行提权

Linux提权
1、内核漏洞提权---内核版本在可利用范围内--拥有匹配内核版本的exp--拥有上传文件权限--对上传文件可执行（tmp目录）
2、SUID提权
3、环境变量劫持高权限
4、sudoer配置文件错误进行提权
5、数据库提权
6、find、git、teehee、crontab命令提权


内网权限维持
windows隐藏用户、shift后门、注册表后门、计划任务、服务后门、wmi后门

什么是黄金票据、白银票据？
黄金票据条件：
1、域名称
2、域sid值
3、域的KRBTGT账户密码hash
4、伪造用户名，可以是随机的
白银票据：
1、域名称
2、域sid值
3、域中server服务器账户的ntml-hash
4、伪造用户名，可以是随意的
5、目标服务器上的kerberos服务

不同点
白银：
不需要和kdc进行交互，需要server服务器庄户的ntml-hash
黄金：
不需要和as进行交互，需要KRBTGT账户密码hash
